{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services\";\nexport let AppInitializer = /*#__PURE__*/(() => {\n  class AppInitializer {\n    constructor(accountService) {\n      this.accountService = accountService;\n    }\n    initialize() {\n      return new Promise(resolve => {\n        // Check if there's an account in local storage\n        const account = this.accountService.accountValue;\n        if (account === null || account === void 0 ? void 0 : account.jwtToken) {\n          // Attempt to refresh the token\n          this.accountService.refreshToken().subscribe({\n            next: () => {\n              console.log('Token refreshed successfully during app initialization');\n              resolve();\n            },\n            error: error => {\n              console.error('Token refresh failed during app initialization:', error);\n              // If token refresh fails, logout and redirect to login page\n              this.accountService.logout();\n              resolve();\n            }\n          });\n        } else {\n          // No stored account, just resolve\n          resolve();\n        }\n      });\n    }\n  }\n  AppInitializer.ɵfac = function AppInitializer_Factory(t) {\n    return new (t || AppInitializer)(i0.ɵɵinject(i1.AccountService));\n  };\n  AppInitializer.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AppInitializer,\n    factory: AppInitializer.ɵfac,\n    providedIn: 'root'\n  });\n  return AppInitializer;\n})();\nexport function appInitializer(accountService) {\n  const initializer = new AppInitializer(accountService);\n  return () => initializer.initialize();\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}