{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../_services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction UsersOnlineComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 10)(2, \"span\", 11);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction UsersOnlineComponent_div_9_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\", 10)(2, \"span\", 11);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"p\", 19);\n    i0.ɵɵtext(5, \"Loading users...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UsersOnlineComponent_div_9_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 20)(2, \"div\", 21)(3, \"div\", 6)(4, \"div\", 22)(5, \"div\", 23)(6, \"div\", 24);\n    i0.ɵɵtext(7, \" Total Users\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 25);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 26);\n    i0.ɵɵelement(11, \"i\", 27);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(12, \"div\", 20)(13, \"div\", 28)(14, \"div\", 6)(15, \"div\", 22)(16, \"div\", 23)(17, \"div\", 29);\n    i0.ɵɵtext(18, \" Online Users\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 25);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 26);\n    i0.ɵɵelement(22, \"i\", 30);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(23, \"div\", 20)(24, \"div\", 31)(25, \"div\", 6)(26, \"div\", 22)(27, \"div\", 23)(28, \"div\", 32);\n    i0.ɵɵtext(29, \" Offline Users\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 25);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\", 26);\n    i0.ɵɵelement(33, \"i\", 33);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r3.getTotalUsersCount());\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate(ctx_r3.getOnlineUsersCount());\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate(ctx_r3.getOfflineUsersCount());\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_tr_20_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1, \"Admin\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_tr_20_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 47);\n    i0.ɵɵtext(1, \"User\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_tr_20_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 48);\n    i0.ɵɵtext(1, \"Online\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_tr_20_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 47);\n    i0.ɵɵtext(1, \"Offline\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtemplate(6, UsersOnlineComponent_div_9_div_9_tr_20_span_6_Template, 2, 0, \"span\", 41);\n    i0.ɵɵtemplate(7, UsersOnlineComponent_div_9_div_9_tr_20_span_7_Template, 2, 0, \"span\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, UsersOnlineComponent_div_9_div_9_tr_20_span_9_Template, 2, 0, \"span\", 43);\n    i0.ɵɵtemplate(10, UsersOnlineComponent_div_9_div_9_tr_20_span_10_Template, 2, 0, \"span\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"a\", 44);\n    i0.ɵɵelement(13, \"i\", 45);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const account_r7 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", account_r7.title, \" \", account_r7.firstName, \" \", account_r7.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(account_r7.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.isAdminRole(account_r7.role));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.isUserRole(account_r7.role));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", account_r7.isOnline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !account_r7.isOnline);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/admin/accounts/edit/\", account_r7.id, \"\");\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"div\")(2, \"span\", 14);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\")(5, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function UsersOnlineComponent_div_9_div_9_div_21_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r12.previousPage());\n    });\n    i0.ɵɵelement(6, \"i\", 51);\n    i0.ɵɵtext(7, \" Previous \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function UsersOnlineComponent_div_9_div_9_div_21_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r14.nextPage());\n    });\n    i0.ɵɵtext(9, \" Next \");\n    i0.ɵɵelement(10, \"i\", 53);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"Page \", ctx_r6.currentPage, \" of \", ctx_r6.totalPages, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r6.currentPage === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r6.currentPage === ctx_r6.totalPages);\n  }\n}\nfunction UsersOnlineComponent_div_9_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 35)(2, \"h6\", 36);\n    i0.ɵɵtext(3, \"User Status\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 6)(5, \"div\", 37)(6, \"table\", 38)(7, \"thead\")(8, \"tr\")(9, \"th\");\n    i0.ɵɵtext(10, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Role\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tbody\");\n    i0.ɵɵtemplate(20, UsersOnlineComponent_div_9_div_9_tr_20_Template, 14, 9, \"tr\", 39);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(21, UsersOnlineComponent_div_9_div_9_div_21_Template, 11, 4, \"div\", 40);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(20);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.paginatedAccounts);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.totalPages > 1);\n  }\n}\nfunction UsersOnlineComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 12)(2, \"div\", 2)(3, \"h1\", 13);\n    i0.ɵɵtext(4, \"Online Users\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 14);\n    i0.ɵɵtext(6, \"View and manage users currently online\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, UsersOnlineComponent_div_9_div_7_Template, 6, 0, \"div\", 15);\n    i0.ɵɵtemplate(8, UsersOnlineComponent_div_9_div_8_Template, 34, 3, \"div\", 16);\n    i0.ɵɵtemplate(9, UsersOnlineComponent_div_9_div_9_Template, 22, 2, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading);\n  }\n}\nexport let UsersOnlineComponent = /*#__PURE__*/(() => {\n  class UsersOnlineComponent {\n    constructor(accountService) {\n      this.accountService = accountService;\n      this.accounts = [];\n      this.loading = true;\n      this.subscriptions = [];\n      this.currentPage = 1;\n      this.itemsPerPage = 5;\n      this.totalPages = 1;\n      this.Math = Math; // Make Math available in template\n    }\n\n    ngOnInit() {\n      this.loadAccounts();\n    }\n    ngOnDestroy() {\n      this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n    loadAccounts() {\n      this.loading = true;\n      const sub = this.accountService.getAll().pipe(first()).subscribe({\n        next: accounts => {\n          // Sort accounts by online status\n          this.accounts = accounts.sort((a, b) => {\n            if (a.isOnline && !b.isOnline) return -1;\n            if (!a.isOnline && b.isOnline) return 1;\n            return 0;\n          });\n          this.totalPages = Math.ceil(this.accounts.length / this.itemsPerPage);\n          this.loading = false;\n        },\n        error: error => {\n          console.error('Error loading accounts:', error);\n          this.loading = false;\n        }\n      });\n      this.subscriptions.push(sub);\n    }\n    get paginatedAccounts() {\n      const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n      return this.accounts.slice(startIndex, startIndex + this.itemsPerPage);\n    }\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    }\n    previousPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n    // Helper methods for the template\n    getOnlineUsersCount() {\n      return this.accounts.filter(a => a.isOnline).length;\n    }\n    getOfflineUsersCount() {\n      return this.accounts.filter(a => !a.isOnline).length;\n    }\n    getTotalUsersCount() {\n      return this.accounts.length;\n    }\n    isAdminRole(role) {\n      return role === 'Admin';\n    }\n    isUserRole(role) {\n      return role === 'User';\n    }\n  }\n  UsersOnlineComponent.ɵfac = function UsersOnlineComponent_Factory(t) {\n    return new (t || UsersOnlineComponent)(i0.ɵɵdirectiveInject(i1.AccountService));\n  };\n  UsersOnlineComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsersOnlineComponent,\n    selectors: [[\"app-users-online\"]],\n    decls: 10,\n    vars: 2,\n    consts: [[1, \"container\", \"py-4\"], [1, \"row\"], [1, \"col-12\"], [1, \"card\", \"shadow-sm\"], [1, \"card-header\", \"bg-white\", \"py-3\"], [1, \"mb-0\"], [1, \"card-body\"], [\"class\", \"d-flex justify-content-center p-5\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\", \"p-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"row\", \"mb-4\"], [1, \"h3\", \"mb-0\", \"text-gray-800\"], [1, \"text-muted\"], [\"class\", \"text-center my-5\", 4, \"ngIf\"], [\"class\", \"row mb-4\", 4, \"ngIf\"], [\"class\", \"card shadow mb-4\", 4, \"ngIf\"], [1, \"text-center\", \"my-5\"], [1, \"mt-2\"], [1, \"col-xl-4\", \"col-md-6\", \"mb-4\"], [1, \"card\", \"border-left-primary\", \"shadow\", \"h-100\", \"py-2\"], [1, \"row\", \"no-gutters\", \"align-items-center\"], [1, \"col\", \"mr-2\"], [1, \"text-xs\", \"font-weight-bold\", \"text-primary\", \"text-uppercase\", \"mb-1\"], [1, \"h5\", \"mb-0\", \"font-weight-bold\", \"text-gray-800\"], [1, \"col-auto\"], [1, \"fas\", \"fa-users\", \"fa-2x\", \"text-gray-300\"], [1, \"card\", \"border-left-success\", \"shadow\", \"h-100\", \"py-2\"], [1, \"text-xs\", \"font-weight-bold\", \"text-success\", \"text-uppercase\", \"mb-1\"], [1, \"fas\", \"fa-signal\", \"fa-2x\", \"text-gray-300\"], [1, \"card\", \"border-left-warning\", \"shadow\", \"h-100\", \"py-2\"], [1, \"text-xs\", \"font-weight-bold\", \"text-warning\", \"text-uppercase\", \"mb-1\"], [1, \"fas\", \"fa-user-slash\", \"fa-2x\", \"text-gray-300\"], [1, \"card\", \"shadow\", \"mb-4\"], [1, \"card-header\", \"py-3\"], [1, \"m-0\", \"font-weight-bold\", \"text-primary\"], [1, \"table-responsive\"], [\"width\", \"100%\", \"cellspacing\", \"0\", 1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"d-flex justify-content-between align-items-center mt-3\", 4, \"ngIf\"], [\"class\", \"badge bg-primary\", 4, \"ngIf\"], [\"class\", \"badge bg-secondary\", 4, \"ngIf\"], [\"class\", \"badge bg-success\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"me-1\", 3, \"routerLink\"], [1, \"fas\", \"fa-edit\"], [1, \"badge\", \"bg-primary\"], [1, \"badge\", \"bg-secondary\"], [1, \"badge\", \"bg-success\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mt-3\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-1\", 3, \"disabled\", \"click\"], [1, \"fas\", \"fa-arrow-left\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"disabled\", \"click\"], [1, \"fas\", \"fa-arrow-right\"]],\n    template: function UsersOnlineComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n        i0.ɵɵtext(6, \"Users Online Status\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵtemplate(8, UsersOnlineComponent_div_8_Template, 4, 0, \"div\", 7);\n        i0.ɵɵtemplate(9, UsersOnlineComponent_div_9_Template, 10, 3, \"div\", 8);\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink],\n    encapsulation: 2\n  });\n  return UsersOnlineComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}